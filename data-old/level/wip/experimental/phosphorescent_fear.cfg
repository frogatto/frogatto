[level]
air_resistance="20"
auto_move_camera="0,0"
background="cave"
background_offset="0,0"
dimensions="0,0,799,599"
id="phosphorescent_fear.cfg"
music=""
preloads=""
segment_height="0"
segment_width="0"
title=""
version="1.1"
water_resistance="100"
xscale="100"
yscale="100"
	[tile_map]
	tiles="
,
,
,
,
,
,
,
,
,
,
,
,
,
,"
	unique_tiles=""
	variations=""
	x="0"
	x_speed="100"
	y="0"
	y_speed="100"
	zorder="-28"
	[/tile_map]

	[tile_map]
	tiles="
,
,
,
,
,
,
,
,
,
,,,,,,,,,,,,,,,,,,lfs,lfs,lfs,lfs
,,,,,,,,,,,,,,,,,,lfs,lfs,lfs,lfs
,,,,,,,,,,,,,,,,,,lfs,lfs,lfs,lfs
,
,,,,,,,,,,,,,,,,,lfs,lfs,lfs
,,,,,,,,,,,,,,,,,lfs,lfs,lfs"
	unique_tiles=",lfs"
	variations=""
	x="0"
	x_speed="103"
	y="0"
	y_speed="103"
	zorder="-14"
	[/tile_map]

	[tile_map]
	tiles="
,
,
,
,
,
,
,
,
,
,
,
,
,
,
,
,"
	unique_tiles=""
	variations=""
	x="0"
	x_speed="100"
	y="0"
	y_speed="100"
	zorder="-10"
	[/tile_map]

	[tile_map]
	tiles="
,,,,,,,,,,,,,,,,,,,,,,pps,pps
,,,,,,,,,,,,,,,,,,,,,,pps,,,,nbr
,,,,,,,,,,,,,,,,,,,,,,pps,,,,nbr
,,,,,,,,,,,,,,,,,,,,,,,,nbr,nbr,nbr
,,,,,,,,,,,,,,,,,,nbr,nbr,,,nbr,nbr,nbr,nbr,nbr
,,,,,,,,,,,,,,,,,,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr
,,,,,,,,,,,,,,,,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr
,,nbr,nbr,,,,,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr
,,nbr,nbr,nbr,,,,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr
,,nbr,nbr,nbr,nbr,,,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr
,,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr
,,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr
,,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr
,,,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr
nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr
nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr
nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr
nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr
nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr,nbr
nbr,nbr,nbr,nbr,nbr,nbr,nbr"
	unique_tiles=",nbr,pps"
	variations=""
	x="-64"
	x_speed="100"
	y="-64"
	y_speed="100"
	zorder="-8"
	[/tile_map]

	[tile_map]
	tiles="
crk,crk,crk,crk,,,,,,,,,,,,,,,,,,,,,,,crk,crk,crk
crk,crk,crk,crk,,,,,,,,,,,,,,,,,,,,,,,crk,crk,crk
crk,crk,crk,crk,,,,,,,,,,,,,,,,,,,,,,,crk,crk,crk
crk,crk,crk,crk,,,,,,,,,,,,,,,,,,,,,,crk,crk,crk,crk
crk,crk,crk,crk,,,,,,,,,,,,,,,,,,,,,,crk,crk,crk,crk
crk,crk,crk,crk,,,,,,,,,,,,,,,,,,,,,,crk,crk,crk,crk
crk,crk,crk,crk,,,,,,,,,,,,,,,,,,,,,,crk,crk,crk,crk
crk,crk,crk,crk,,,,,,,,,,,,,,,,,,,,,,crk,crk,crk,crk
crk,crk,crk,crk,,,,,,,,,,,,,,,,,,,,,,crk,crk,crk,crk
crk,crk,crk,crk,,,,,,,,,,,,,,,,,,,,,,crk,crk,crk,crk
crk,crk,crk,crk,crk,crk,,,,,,,,,,,,,,,,,,,,crk,crk,crk,crk
crk,crk,crk,crk,crk,crk,crk,,,,,crk,crk,crk,,,,,,,,,,,,crk,crk,crk,crk
crk,crk,crk,crk,crk,crk,,,,,,crk,crk,crk,,,,,,,,,,,crk,crk,crk,crk,crk
crk,crk,crk,crk,crk,crk,,,crk,crk,crk,crk,crk,crk,,,,,,,,,,,crk,crk,crk,crk,crk
crk,crk,crk,crk,crk,,,,crk,crk,crk,crk,crk,crk,crk,crk,,,,,,,,crk,crk,crk,crk,crk,crk
,,,,,,,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk
,,,,,,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk
,,,,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk
crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk
crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk
crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk
crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk
crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk,crk"
	unique_tiles=",crk"
	variations=""
	x="-64"
	x_speed="100"
	y="-64"
	y_speed="100"
	zorder="-5"
	[/tile_map]

	[tile_map]
	tiles="
,
,
,
,
,
,
,
,
,
,
,
,
,
,
,
,
,"
	unique_tiles=""
	variations=""
	x="0"
	x_speed="100"
	y="0"
	y_speed="100"
	zorder="-3"
	[/tile_map]

	[tile_map]
	tiles="
,
,
,
,
,
,
,
,
,
,
,
,"
	unique_tiles=""
	variations=""
	x="0"
	x_speed="100"
	y="0"
	y_speed="100"
	zorder="0"
	[/tile_map]

	[tile_map]
	tiles="
,
,
,
,
,
,
,
,
,
,
,
,
,
,
,
,"
	unique_tiles=""
	variations=""
	x="0"
	x_speed="100"
	y="0"
	y_speed="100"
	zorder="20"
	[/tile_map]

	[tile_map]
	tiles="
,
,
,
,
,
,
,
,
,
,
,
,"
	unique_tiles=""
	variations=""
	x="0"
	x_speed="100"
	y="0"
	y_speed="100"
	zorder="30"
	[/tile_map]

	[tile_map]
	tiles="
,
,
,
,
,
,
,
,
,
,
,
,"
	unique_tiles=""
	variations=""
	x="0"
	x_speed="100"
	y="0"
	y_speed="100"
	zorder="49"
	[/tile_map]

	[tile_map]
	tiles="
,
,
,
,
,
,
,
,
,
,
,
,"
	unique_tiles=""
	variations=""
	x="0"
	x_speed="100"
	y="0"
	y_speed="100"
	zorder="100"
	[/tile_map]

	[character]
	_addr="0xc658fc0"
	current_frame="normal"
	custom="yes"
	face_right="yes"
	is_human="true"
	label="_475e256a"
	time_in_frame="0"
	type="frogatto_playable"
	velocity_x="0"
	velocity_y="0"
	x="64"
	y="190"
		[editor_info]
		category="player"
		[/editor_info]

		[objects_destroyed]
		level="phosphorescent_fear.cfg"
		objects=""
		[/objects_destroyed]

	[/character]

	[character]
	_addr="0xc65adb8"
	current_frame="normal"
	custom="yes"
	face_right="yes"
	label="_51d3a4e7"
	on_process="[
		if(cycle % 10 = 2, [	#add new oil and remove old oil#
			set(vars.oil, filteredOil + [newOilDrop]), 
			add_object(newOilDrop), 
			set(newOilDrop.parent, self), 
			set(newOilDrop.velocity_y, 500+1d150), 
			set(newOilDrop.velocity_x, 25-1d50),
			[set(newOilDrop.red, sin(cycle/4+333)*4), set(newOilDrop.blue, sin(cycle/5+666)*4), set(newOilDrop.green, sin(cycle/6+999)*4), ]
				] where newOilDrop = object('oil-drop', self.midpoint_x, self.midpoint_y, self.facing),
			[set(vars.oil, filteredOil), map(filter(vars.oil, 'oil', not oil in filteredOil), 'clutter', 
				[remove_object(clutter.outline), remove_object(clutter)])])
			where filteredOil = filter(vars.oil, 'dirtyOil', dirtyOil.x > level.dimensions[0] and dirtyOil.x < level.dimensions[2] and dirtyOil.y < level.dimensions[3]),
		
		map(vars.oil, 'drop', [	#Figure out where each drop of oil is going based on wall proximity and droplet proximity.#
			set(drop.x, dropMot[0]),
			set(drop.y, dropMot[1]),
			set(drop.outline.x, dropMot[0]),
			set(drop.outline.y, dropMot[1]),
			set(drop.velocity_x, dropMot[2]),
			set(drop.velocity_y, dropMot[3]),
			]
			where dropMot =
				[drop.x, drop.y] + if(sum(solidities) != 5, 
				[if((solidities[1] and (not solidities[3]) and dvx > 0) or (solidities[3] and (not solidities[1]) and dvx < 0), 0, dvx) 
					where dvx = ((drop.velocity_x+solidities[1]*(-wallRepulsion)+solidities[3]*wallRepulsion+gravity[0]+totalForce[0])*airResistance)/10000,
				 if((solidities[2] and (not solidities[4]) and dvy > 0) or (solidities[4] and (not solidities[2]) and dvy < 0), 0, dvy) 
					where dvy = ((drop.velocity_y+solidities[2]*(-wallRepulsion)+solidities[4]*wallRepulsion+gravity[1]+totalForce[1])*airResistance)/10000],
				[-drop.velocity_x/2, -drop.velocity_y/2])
			
			where solidities = map([[0,0],[radius, 0],[0, radius],[-radius, 0],[0, -radius]] where radius = 40, 
				'dists', solid(level, drop.midpoint_x+dists[0], drop.midpoint_y+dists[1]) 
				)
			where totalForce = [sum(map(forces, 'force', force[0])), sum(map(forces, 'force', force[1]))]
			where forces = map(filter(vars.oil, 'eachOilDrop', eachOilDrop != drop), 'oilDrop', [
				((repulseStrength*1000*orbit_obj(0,0,ang+180,dist)[0])/(dist*dist*dist))/1, 
				((repulseStrength*1000*orbit_obj(0,0,ang+180,dist)[1])/(dist*dist*dist))/2] 
					where dist = distance(drop, oilDrop)
					where ang = angle_to(drop, oilDrop))
		)] where gravity = [0,80]
		where wallRepulsion = 100
		where airResistance = 9400 #IT'S OVER 9000!!# 
		where repulsionDist = 0
		where repulseStrength = 100"
	time_in_frame="0"
	type="target"
	velocity_x="0"
	velocity_y="0"
	x="629"
	y="5"
		[vars]
		on="1"
		[/vars]

		[editor_info]
		category="controllers"
		[/editor_info]

	[/character]

	[serialized_objects]
	[/serialized_objects]

[/level]

