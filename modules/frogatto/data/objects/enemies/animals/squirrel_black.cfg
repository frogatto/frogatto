{
id: "squirrel_black",
prototype: ["ant"],
solid_area: [17,11,28,27],
timer_frequency: 3,
vars: {
	points_value: 11,
	charge_up: 0,
	charge_time: 8,
},
consts: {
	basic_type: "squirrel_black",
	thrown_type: "squirrel_black.thrown",
	frogourmet_tag: "squirrel_black",
},

#faster walk speed necessitates a more frequent check.
on_enter_walk_anim: "[set(vars.charge_up, vars.charge_up+1), if(vars.charge_up >= vars.charge_time, animation('toss'))]",
on_end_toss_anim: "[set(vars.charge_up, 0), animation('walk')]",

on_throw_acorn: "fire_event(if(level.player.difficulty >= level.player.difficulty_challenging, 'aimed_throw', 'normal_throw'))",
on_normal_throw: "spawn('acorn', midpoint_x + (20 * facing), y, facing, [animation('thrown'), set(velocity_x, velx),set(velocity_y, -700)])
		where velx = 500 * facing",
on_aimed_throw: "[spawn('acorn', midpoint_x + (20 * facing), y, facing, [animation('thrown'), set(velocity_x, velx),set(velocity_y, vely)])]
		where velx = max(450,(abs(level.player.midpoint_x - midpoint_x)*4.4) - (abs(level.player.midpoint_y - midpoint_y))*0.8) * facing
		where vely = -850-(me.y-level.player.y)*0.8",

editor_info: {
	category: "enemies, forest",
	var: {
		name: "charge_time",
		value: 6,
	},
},
animation: [
	{
		"@base": true,
		no_remove_alpha_borders: true,
	},
	{
		image: "enemies/squirrel-black.png",
		rotate_on_slope: true,
		pad: 3,
		accel_x: 0,
		accel_y: 80,
		body_area: "all",
		id: "stand",
		rect: [1,1,45,29],
		attack_area: [26,18,35,28],
	},
	{
		image: "enemies/squirrel-black.png",
		rotate_on_slope: true,
		pad: 3,
		accel_x: 0,
		accel_y: 80,
		body_area: "all",
		id: "stand",

		#blink variant
		rect: [1,33,45,61],
		attack_area: [26,18,35,28],
	},
	{
		image: "enemies/squirrel-black.png",
		rotate_on_slope: true,
		pad: 3,
		accel_x: 450,
		accel_y: 80,
		body_area: "all",
		id: "walk",
		rect: [193,1,237,29],
		attack_area: [26,18,35,28],
		frames: 6,
		frames_per_row: 3,
		duration: 2,
	},
	{
		image: "enemies/squirrel-black.png",
		rotate_on_slope: true,
		pad: 3,
		accel_x: 0,
		accel_y: 80,
		body_area: "all",
		id: "spring",
		rect: [1,65,45,93],
		frames: 1,
	},
	{
		image: "enemies/squirrel-black.png",
		rotate_on_slope: true,
		pad: 3,
		accel_x: 0,
		accel_y: 80,
		body_area: "all",
		id: "turn",
		rect: [1,97,45,125],
		frames: 5,
		attack_area: [11,18,35,28],
	},
	{
		image: "enemies/squirrel-black.png",
		rotate_on_slope: true,
		pad: 3,
		accel_x: 0,
		accel_y: 80,
		body_area: "all",
		id: "hurt",
		rect: [49,65,93,93],
	},
	{
		image: "enemies/squirrel-black.png",
		rotate_on_slope: true,
		pad: 3,
		accel_x: 0,
		accel_y: 80,
		body_area: "all",
		id: "toss",
		rect: [1,161,45,189],
		events: "42:throw_acorn",
		duration: 6,
		frames: 9,
		frames_per_row: 3,
	},
],
object_type: {
	id: "thrown",
	prototype: ["throwable_small_enemy"],
	solid_area: [17,11,28,27],
	solid_dimensions: ["common","enemy"],
	consts: {
		basic_type: "squirrel_black",
		thrown_type: "squirrel_black.thrown",
		frogourmet_tag: "squirrel_black",
	},
	animation: [
		{
			image: "enemies/squirrel-black.png",
			id: "thrown",
			thrown_area: "all",
			duration: 60,
			rect: [97,129,141,157],
			frames: 1,
			body_area: null,
		},
		{
			image: "enemies/squirrel-black.png",
			id: "on_back",
			rect: [1,129,45,157],
			frames: 2,
			duration: 5,
			body_area: "all",
		},
	],
},
}
