{
id: "spitting_flower",
prototype: ["stationary_vulnerable"],
hitpoints: 100,
zorder: 0,
properties: {
	handle_knockback: "def(collide_with) null",
},
vars: {
	load: 0,
	points_value: 3,
},
consts: {
	basic_type: "spitting_flower",
	frogourmet_tag: "spitting_flower",
},
on_pop: "sound('flowerpop.wav')",
on_end_normal_anim: "if(vars.load >= vars.loading_time,
					     [animation('fire'), set_var('load', 0)],
						 [animation('normal'), set_var('load', vars.load + 1)])",
on_end_spring_anim: "animation('normal')",
on_end_fire_anim: "animation('normal')",
on_end_dying_anim: "animation('dead')",
on_end_dead_anim: "animation('respawn')",
on_end_respawn_anim: "animation('normal')",
on_shoot: "[spawn('spitting_flower.pollen_ball', midpoint_x+ facing*50, midpoint_y -15, facing, set(velocity_x,800*facing)),sound('FlowerShot.ogg')]",
on_die: "[spawn('die_cloud', midpoint_x, midpoint_y, facing), set(hitpoints, max_hitpoints), animation('dying')]",
solid_area: [12,6,24,30],
editor_info: {
	category: "enemies, seaside",
	var: {
		name: "loading_time",
		value: 3,
	},
},
animation: [
	{
		image: "enemies/spittingflower.png",
		pad: 3,
		accel_y: 80,
		body_area: "all",
		id: "normal",
		rect: [1,1,43,37],
		frames: 3,
		duration: 5,
		duplicates: 5,
		reverse: true,
	},
	{
		image: "enemies/spittingflower.png",
		pad: 3,
		accel_y: 80,
		body_area: "all",
		id: "normal",
		rect: [139,1,181,37],
		frames: 3,
		duration: 5,
		reverse: true,
	},

	#the spring animation is a duplicate of the normal animation,
	#unless/until we have a proper one.
	{
		image: "enemies/spittingflower.png",
		pad: 3,
		accel_y: 80,
		body_area: "all",
		id: "spring",
		rect: [1,1,43,37],
		frames: 3,
		frames_per_row: 1,
		reverse: true,
		duration: 5,
	},
	{
		image: "enemies/spittingflower.png",
		pad: 3,
		accel_y: 80,
		body_area: "all",
		id: "fire",
		rect: [1,161,43,197],
		frames: 6,
		duration: 4,
		events: "20:shoot",
	},
	{
		image: "enemies/spittingflower.png",
		pad: 3,
		accel_y: 80,
		body_area: "all",
		id: "hurt",
		rect: [1,121,43,157],
		frames: 7,
		duration: 4,
	},
	{
		image: "enemies/spittingflower.png",
		pad: 3,
		accel_y: 80,
		body_area: null,
		id: "dying",
		rect: [1,201,43,237],
		frames: 3,
		duration: 8,
	},
	{
		image: "enemies/spittingflower.png",
		pad: 3,
		accel_y: 80,
		body_area: null,
		id: "dead",
		rect: [139,201,181,237],
		frames: 1,
		duration: 300,
	},
	{
		image: "enemies/spittingflower.png",
		pad: 3,
		accel_y: 80,
		body_area: null,
		id: "respawn",
		rect: [1,41,43,77],
		frames: 7,
		duration: 6,
		events: "27:pop",
	},
],

object_type: [
	{
		id: "pollen_ball",
		always_active: true,
		affected_by_currents: true,
		object_level_collisions: true,
		prototype: ["shot"],
		on_create: "add_particles('particles')",
		on_die: "spawn('pollen_impact_particle', midpoint_x, midpoint_y, 0)",
		on_timer: "[set(rotate, cycle*10)]",
		timer_frequency: 4,
		on_end_anim: "die()",
		on_enter_water: "[add_wave(midpoint_x, y2, 500, velocity_y, 10*velocity_y, 100, 100),
							 add_wave(midpoint_x, y2, -500, velocity_y, 10*velocity_y, 100, 100), die()]",
		zorder: 10,
		animation: {
			id: "normal",
			image: "enemies/shooting-plant.png",
			rect: [90,2,100,12],
			frames: 1,
			duration: 250,
			body_area: "all",
			attack_area: "all",
		},
		particle_system: {
			id: "particles",
			type: "point",
			generation_rate_millis: 250,
			dot_size: 3,
			dot_rounded: true,
			time_to_live: 12,
			time_to_live_rand: 24,
			colors: ["f9f9dbff","ffc20eff","ffc20eaa","ff7e00aa","ae4a2855"],
			pos_x: 5,
			pos_y: 5,
			velocity_x: -1500,
			velocity_x_rand: 3000,
			velocity_y: -1500,
			velocity_y_rand: 3000,
		},
	},

],
}
