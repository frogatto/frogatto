[prototype]
	prototype=ct-track
	
	[vars]
		group=['track']
	[/vars]
	
	[properties]
		#this is a direct copy/paste of ct-block's set_alpha#
		set_alpha	= "def(val) map(objs, 'obj', set(obj.alpha, val+200)) where objs = vars.overlays + [self]"
		
# 		additionalPlacementRequirementsMet="def(location, chars) 
# 			('support' in groups1 and 'support' in groups2)
# 				where groups1 = groups_at(location, [ 0, 0,-1])
# 				where groups2 = groups_at(location, [ 0, 0, 0])"
				
		additionalBlocks="def(chars)
			[{'id' -> 'ct-legs-5', 'pos' -> [ 0, 0, 0]},
			]"
	[/properties]
	
	on_overlay="[
		obj.setToGrid(list_add(self.vars.location, [0,0,1])),
		set(overlays, overlays + [obj]),
		add_object(obj),
		] where obj = object(self.type + '.tips', 1,1,1)"
[/prototype]